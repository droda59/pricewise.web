<template>
    <require from="./components/list-menu"></require>
    <require from="./components/create-list-modal"></require>
    <require from="./components/alerts-list"></require>
    <require from="../shared/components/add-source-modal"></require>

    <div class="primary-dark" style="color: white;">
        <div class="ui container" style="position: relative;">
            <div class="ui text menu" style="margin: 0; padding: 3em 0;">
                <div class="item">
                    <h1 class="ui header" style="color: white; font-size: 3rem; font-weight: 200;" i18n="alerts.watchedProducts">Watched products</h1>
                </div>
            </div>
        </div>
    </div>

    <div class="primary-light" style="padding-bottom: 2em;">
        <div class="ui container">
            <list-menu class="mobile hidden"
                lists.one-time="lists"
                selected-list.two-way="currentListFilter"
                delete.call="deleteList(list)"
                add.call="showModal(createListModal)">
            </list-menu>

            <div show.bind="currentList">
                <a class="ui primary-action button" click.delegate="showModal(updateListModal)" i18n="[append]lists.updateButton">
                    <i class="plus icon"></i>
                </a>

                <create-list-modal
                    view-model.ref="updateListModal"
                    is-working.one-way="isUpdating"
                    alerts.one-way="allAlerts"
                    list.one-way="currentList"
                    save.call="saveList(list)">
                </create-list-modal>
            </div>

            <alerts-list
                show.bind="allAlerts.length"
                alerts.one-way="alerts"
                delete.call="removeAlert(alert)"
                add.call="showModal(createAlertModal)"
                activate.call="activateAlert(alert)">
            </alerts-list>
        </div>

        <div class="ui overlay" hide.bind="allAlerts.length">
            <div style="width: 100%; position: absolute; top: 50%; left: 0;">
                <p style="text-align: center;" i18n="alerts.noAlert">You are not watching any products right now.</p>
                <p style="text-align: center;" i18n="alerts.getStarted">Get started!</p>
                <div style="text-align: center;">
                    <div class="ui primary primary-action button" click.delegate="showModal(addSourceModal)"
                        i18n="[append]alerts.createAlert"
                        data-analytics-category="Alerts"
                        data-analytics-action="add"
                        data-analytics-label="overlay">
                        <i class="plus icon"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="ui ${isUpdating ? 'active': ''} inverted dimmer">
            <div class="ui text loader" i18n="alerts.updating">Updating</div>
        </div>

        <create-list-modal view-model.ref="createListModal" is-working.one-way="isUpdating" alerts.one-way="allAlerts" save.call="saveList(list)"></create-list-modal>
        <add-source-modal view-model.ref="createAlertModal" is-working.one-way="isUpdating" add.call="createAlert(newAlertUrl)"></add-source-modal>
    </div>
</template>
