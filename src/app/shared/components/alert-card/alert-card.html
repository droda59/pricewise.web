<template bindable="alert" containerless>
    <div class="alert-card ${alert.isActive ? 'green' : 'inactive'} card">
        <div class="content">
            <slot name="top-action"></slot>
            <a class="header" route-href="route: alert; params.bind: { alertId: alert.id }">${alert.title}</a>
            <div class="meta">
                <small show.bind="alert.isActive" i18n="[prepend]alert.bestDealUpdatedTime">${alert.bestCurrentDeal.modifiedAt | rt}</small>
                <small hide.bind="alert.isActive" i18n="alert.deactivated">Deactivated</small>
            </div>
        </div>
        <a route-href="route: alert; params.bind: { alertId: alert.id }" class="image">
            <img class="${alert.isPortaitSize ? 'portrait' : ''} ${alert.isLandscapeSize ? 'landscape' : ''}" src.bind="alert.imageUrl">
        </a>
        <div class="extra content">
            <a href.bind="alert.bestCurrentDeal.productUrl" target="_blank" class="right floated" show.bind="alert.isActive"
                data-analytics-category="Outbound Link"
                data-analytics-action="click"
                data-analytics-label.bind="alert.bestCurrentDeal.originalUrl">
                ${alert.bestCurrentDeal.price | nf: { style: 'currency', currency: 'CAD'}}
                <span i18n="alert.priceAt"></span>
                <img class="ui avatar image" src="/images/${alert.bestCurrentDeal.source.domain}-small.png">
                ${alert.bestCurrentDeal.source.name}
            </a>
            <a class="right floated primary-action-hover" click.delegate="activateAlert(alert)" hide.bind="alert.isActive"
                i18n="[append]alert.activate"
                data-analytics-category="alerts"
                data-analytics-action="activate">
                <i class="toggle on icon"></i>
            </a>
        </div>
    </div>
</template>
