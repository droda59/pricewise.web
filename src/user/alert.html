<template>
    <form class="ui ${loading ? 'loading' : ''} form" submit.delegate="save()" role="form">
        <div class="ui text menu">
            <div class="ui sixteen wide h3 transparent icon input field">
                <input type="text" value.bind="title & updateTrigger:'blur'">
                <i class="edit icon"></i>
            </div>
        </div>

        <div class="ui divider"></div>

        <div class="ui relaxed items">
            <div class="item" repeat.for="entry of alert.entries" if.bind="!entry.isDeleted">
                <div class="ui eleven wide field">
                    <p>
                        ${entry.title} at <a href.bind="entry.uri" target="_blank">${entry.uri | hostName}</a>
                    </p>
                </div>
                <div class="two wide field">
                    <input type="text" class="no-input" disabled show.bind="entry.lastPrice" value.bind="entry.lastPrice | price">
                </div>
                <div class="three wide field">
                    <div class="right floated content">
                        <div class="ui basic circular red icon button" click.delegate="removeEntry(entry)">
                            <i class="icon remove"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="item">
                <div class="eleven columns wide field">
                    <div class="ui right action input">
                        <input value.bind="newEntryUrl" type="url" placeholder="Url">
                        <button class="ui teal button ${newEntryUrl.length ? '' : 'disabled'}" click.delegate="addEntry()">
                            <i class="add icon"></i>
                            Add
                        </button>
                    </div>

                    <div class="ui tiny visible info message">
                        <div class="header">
                            At the moment, these sites are supported: 
                        </div>
                        <ul class="list">
                            <li>Amazon</li>
                            <li>BestBuy</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="ui divider"></div>

        <a class="ui button" tabindex="0" route-href="route: alerts">Back</a>
    </form>

    <confirmation-modal header="Delete alert" message="Are you sure you want to delete the selected entry in this alert?"></confirmation-modal>
</template>
