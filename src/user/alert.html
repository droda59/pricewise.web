<template>
    <require from="./components/price-graph"></require>
    <require from="./components/add-source"></require>

    <form class="ui ${loading ? 'loading' : ''} form" submit.delegate="save()" role="form">
        <div class="ui text menu">
            <div class="ui sixteen wide h3 transparent icon input field">
                <input type="text" value.bind="title & updateTrigger:'blur'">
                <i class="edit icon"></i>
            </div>
        </div>

        <div class="ui divider"></div>

        <div class="ui relaxed items">
            <div class="item" repeat.for="entry of alert.entries" if.bind="!entry.isDeleted">
                <div class="ui eleven wide field">
                    <p>
                        ${entry.title} at <a href.bind="entry.uri" target="_blank">${entry.uri | hostName}</a>
                    </p>
                </div>
                <div class="two wide field">
                    <input type="text" class="no-input" disabled show.bind="entry.lastPrice" value.bind="entry.lastPrice | price">
                </div>
                <div class="three wide field">
                    <div class="right floated content">
                        <div class="ui basic circular red icon button" click.delegate="removeEntry(entry)">
                            <i class="icon remove"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>

    <add-source class="${isCreatingAlert ? 'loading' : ''}" add.call="addEntry(newAlertUrl)" cancel.call="cancel()"></add-source>

    <div class="ui divider"></div>
    <div class="ui stackable center aligned grid container">
        <div class="fourteen wide column">
            <div class="ui stackable center aligned vertically padded grid">
                <div class="twelve wide column">
                    <h3 class="ui header">Price history</h3>
                    <!--<price-graph title.one-time="title" data.one-way="alertHistory"></price-graph>-->
                </div>
            </div>
        </div>
    </div>

    <a class="ui button" tabindex="0" route-href="route: alerts">Back</a>

    <confirmation-modal header="Delete alert" message="Are you sure you want to delete the selected entry in this alert?"></confirmation-modal>
</template>
